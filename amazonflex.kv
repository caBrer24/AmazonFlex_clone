
# ALL HAVING TO DO WITH LOGIN INTERFACE
<LoginWindow>
    canvas.before:
        Rectangle:
            pos: self.pos
            size: (450, 785)
            source: 'back_pic.png'

        Color:
            rgba: app.bg_col

        Rectangle:
            pos: self.pos
            size: (450, 150)

    BoxLayout:
        orientation: "vertical"
        padding: 25
        spacing: 10


        MDFlatButton:
            id: sign_in_amazon_button
            size_hint: (1, None)
            text: "[b]Sign in with Amazon[/b]"
            theme_text_color: "Custom"
            text_color: "white"
            md_bg_color: app.main_orange
            on_release:
                root.manager.current = "credentials"



        MDRectangleFlatButton:
            id: create_account
            markup: True
            id: create_account
            text: "[b]Create an account[/b]"
            size_hint: (1, None)
            line_color: app.main_orange
            text_color: app.main_orange
            line_width: 1.3
            on_release:
                root.manager.current = 'create_account'


<Credentials>
    canvas.before:
        Rectangle:
            pos: self.pos
            size: (450, 785)
            source: 'back_pic.png'
        Color:
            rgba: app.bg_col
        Rectangle:
            pos: self.pos
            size: (450, 385)
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        padding: 20
        MDIconButton:
            id: back_arrow
            size_hint: 1, .05
            icon: "arrow-left"
            pos_hint: {"center_x": 0.03}
            user_font_size: "30sp"
            theme_icon_color: "Custom"
            icon_color: "white"
            on_release:
                root.manager.current = "login"
        FloatLayout:

            MDLabel:
                pos_hint: {"center_x": 0.5, "center_y": 0.05}
                id: sign_in_amazon_label
                font_size: "18sp"
                bold: True
                text: "Sign in with your\nAmazon.com account"


        MDTextField:
            id: email
            mode: 'rectangle'
            size_hint: 0.8, None
            cursor_color: app.main_orange

            font_size: "12sp"
            hint_text: "Username or email address"
            multiline: False
            line_color_normal: "grey"

        MDTextField:
            id: password_input
            color_mode: "custom"
            mode: 'rectangle'
            size_hint: 0.8, None
            font_size: "12sp"
            hint_text: "Password"
            password: True
            password_mask: "•"
            multiline: False
            line_color_normal: "grey"
            background_width : 0

        GridLayout:
            cols: 2
            size_hint: 1, 0.12
            pos_hint: {"center_x": 0.22}
            spacing: -100

            MDCheckbox:

                pos_hint: {"center_x": 0.5}

                on_active: app.on_checkbox_active(*args)

            MDLabel:


                text: "Show password"
                font_size: "13sp"
                color: "black"

        MDFlatButton:
            id: sign_in_button
            theme_text_color: "Custom"
            text_color: "white"
            size_hint: (1, None)
            md_bg_color: app.main_orange
            disabled_color: app.disabled_text_orange
            md_bg_color_disabled: app.disabled_orange
            text: "Sign in"
            disabled: True if password_input.text == "" or email.text == "" else False
            on_release:
                root.manager.current = 'main'



        MDTextButton:
            id: forgot_pw
            text: "Forgot password"
            size_hint: 1, None
            pos_hint: {"center_x": 0.5}
            theme_text_color: "Custom"
            color: app.main_orange
            font_size: "13sp"
            on_release:
                root.manager.current = "forgot_pass"

<CreateAcc>
    canvas.before:
        Color:
            rgba: app.bg_col
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        spacing: 20
        padding: 20

        MDIconButton:
            id: back_arrow
            size_hint: 1, .05
            icon: "arrow-left"
            pos_hint: {"center_x": 0.03}
            user_font_size: "30sp"
            theme_icon_color: "Custom"
            icon_color: app.main_orange
            on_release:
                root.manager.current = "login"

        FloatLayout:

            MDLabel:
                pos_hint: {"center_x": 0.5, "center_y": 0.90}
                id: sign_in_amazon_label
                font_size: "19sp"
                bold: True
                text: "Create a new account"
                color: 'black'



            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.75}
                id: username
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Username"
                multiline: False
                line_color_normal: "grey"

            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.55}
                id: email
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Email"
                multiline: False
                line_color_normal: "grey"



            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.35}
                id: password
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Password"
                password: True
                password_mask: "•"
                multiline: False
                line_color_normal: "grey"



            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.15}
                id: confirm_pass
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Confirm password"
                password: True
                password_mask: "•"
                multiline: False
                line_color_normal: "grey"


        MDFlatButton:
            id: sign_in_button
            theme_text_color: "Custom"
            text_color: "white"
            size_hint: (1, None)
            text: "Create account"
            md_bg_color: app.main_orange
            md_bg_color_disabled: app.disabled_orange
            disabled_color: app.disabled_text_orange
            disabled: True if username.text == "" or email.text == "" or password.text == "" or confirm_pass.text == "" else False
            on_release:
                root.manager.current = "credentials"


        MDLabel:
            size_hint: 1, 0.1
            text: "or"
            color: app.main_orange
            bold: True
            font_size: "15sp"
            halign: "center"

        MDGridLayout:
            cols: 3
            size_hint: .60, .1
            pos_hint: {"center_x": .5, "center_y": 1}
            Image:
                source: "assets/google.png"

            Image:
                source: "assets/amazon.png"

            Image:
                source: "assets/apple.png"

<ForgotPass>
    canvas.before:
        Color:
            rgba: app.bg_col
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        spacing: 20
        padding: 20

        MDIconButton:
            id: back_arrow
            size_hint: 1, .05
            icon: "arrow-left"
            pos_hint: {"center_x": 0.03}
            user_font_size: "30sp"
            theme_icon_color: "Custom"
            icon_color: app.main_orange
            on_release:
                root.manager.current = "credentials"

        FloatLayout:

            MDLabel:
                pos_hint: {"center_x": 0.5, "center_y": 0.90}
                id: create_password
                font_size: "19sp"
                bold: True
                text: "Create a new password!"
                color: 'black'



            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.75}
                id: email
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Email"
                multiline: False
                line_color_normal: "grey"



            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.6}
                id: new_password
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "New password"
                multiline: False
                password: True
                password_mask: "•"
                line_color_normal: "grey"

            MDTextField:
                pos_hint: {"center_x": 0.4, "center_y": 0.45}
                id: confirm_pass
                mode: 'rectangle'
                size_hint: 0.8, None
                cursor_color: app.main_orange
                font_size: "12sp"
                hint_text: "Confirm password"
                multiline: False
                password: True
                password_mask: "•"
                line_color_normal: "grey"


        MDFlatButton:
            id: reset_pass
            theme_text_color: "Custom"
            text_color: "white"
            size_hint: (1, None)
            text: "Reset password"
            disabled: True if email.text == "" or new_password.text == "" or confirm_pass.text == "" else False
            md_bg_color: app.main_orange
            md_bg_color_disabled: app.disabled_orange
            disabled_color: app.disabled_text_orange

            on_release:
                root.manager.current = "reset_pass"

<ResetPass>
    MDIconButton:
        id: back_arrow
        size_hint: 1, .05
        icon: "arrow-left"
        pos_hint: {"center_x": 0.071, "center_y": 0.954}
        user_font_size: "30sp"
        theme_icon_color: "Custom"
        icon_color: app.main_orange
        on_release:
            root.manager.current = "credentials"
    MDLabel:
        halign: "center"
        text: "Your password has been reset!"










#: import NoTransition kivy.uix.screenmanager.NoTransition

<MainWindow>

    MDTopAppBar:
        id: toolbar

        padding: -3
        spacing: 25
        size_hint: 1, 0.08
        pos_hint: {"top": 1}
        opposite_colors: True
        set_bars_colors: True

        anchor_title: "left"
        md_bg_color: "#3D3B40"
        specific_text_color: "white"

        elevation: 0
        left_action_items: [['menu', lambda x: nav_draw.set_state('toggle')]]
        right_action_items: [['message-outline'], ['information-outline']]


    MDNavigationLayout:
        ScreenManager:
            id: main_screens
            transition: NoTransition()


            MDScreen:
                name: "updates"

                MDLabel:
                    id: test_label
                    text: "Updates"
                    halign: "center"

            MDScreen:
                name: "itinerary"
                id: itinerary

                MDTabs:
                    id: tabs

                    tab_indicator_anim: True
                    tab_indicator_height: '0dp'

                    text_color_normal: 0.7, 0.40, 0, 1
                    text_color_active: 'white' if app.theme_cls.theme_style == "Light" else "black"

                    tab_padding: [45, 15 , 0, 15]
                    pos_hint: {"top": 0.932}

                    lock_swiping: True

                    Tab:

                        id: stops
                        title: "[b][size=16]STOPS[/size]"

                        ScrollView:
                            pos_hint: {"top": 1.02}
                            MDList:
                                id: container


                    Tab:
                        title: "[b][size=16]MAP[/size]"

                        MDFloatLayout:

                            MDBoxLayout:
                                orientation: "vertical"

                                MapView:

                                    lat: 29.75
                                    lon: -95.36
                                    zoom: 10



                            MDFloatingActionButton:
                                pos_hint: {"right": 0.965, "y": 0.19}
                                type: "small"
                                icon: "cog-outline"
                                md_bg_color: 1, 1, 1 ,1
                                text_color: 0, 0, 0, 1


                            MDFloatingActionButton:
                                pos_hint: {"right": 0.965, "y": 0.1}
                                type: "small"
                                icon: "navigation-variant"
                                md_bg_color: 1, 1, 1 ,1
                                text_color: 0, 0, 0, 1


                    Tab:
                        title: "[b][size=16]SUMMARY[/size]"

                        MDBoxLayout:
                            orientation: "vertical"
                            padding: "10dp"
                            spacing: 15
                            size_hint: 1, 0.4
                            pos_hint: {"top": 1.01}

                            MDBoxLayout:
                                size_hint: 1, 1
                                MDLabel:
                                    text: "Work remaining"
                                    bold: True
                                    font_size: 24

                                MDIconButton:
                                    icon: 'information-outline'
                                    pos_hint: {"center_y": 0.5}

                            MDBoxLayout:
                                id: stops_number
                                orientation: "vertical"
                                spacing: 10

                                MDLabel:
                                    text: "[b]41 stops[/b]\n[size=16]Includes 15 multi-location stops[/size]"
                                    markup: True

                                MDProgressBar:
                                    value: 50
                                    color: 'orange'
                                    size_hint: 1, 0.22

                            MDBoxLayout:
                                id: locations
                                orientation: "vertical"

                                MDLabel:
                                    text: "128 locations"
                                    bold: True

                                MDProgressBar:
                                    value: 50
                                    color: 'orange'
                                    size_hint: 1, 0.18


                            MDBoxLayout:
                                id: packages
                                orientation: "vertical"

                                MDLabel:
                                    text: f"{root.packages} packages"
                                    bold: True

                                MDProgressBar:
                                    value: 75
                                    color: 'orange'
                                    size_hint: 1, 0.18




            MDScreen:
                name: "schedule"
                MDLabel:
                    text: "You don't have upcoming work scheduled for today."
                    pos_hint: {"center_x": 0.536, "top": 1.37}

            MDScreen:
                name: "dashboard"
                MDLabel:
                    text: "dashboard"
                    halign: "center"

            MDScreen:
                name: "learning"
                MDLabel:
                    text: "learning"
                    halign: "center"

            MDScreen:
                name: "feedback"
                MDLabel:
                    text: "feedback"
                    halign: "center"


            MDScreen:
                name: "settings"

                MDList:
                    pos_hint: {"top": 0.932}

                    OneLineRightIconListItem:
                        text: "[size=18]Personal information[/size]"


                        IconRightWidget:
                            icon: "chevron-right"

                    TwoLineRightIconListItem:
                        text: "[size=18]Phone number[/size]"
                        secondary_text: "[size=18]+1 222-333-4444[/size]"


                        IconRightWidget:
                            icon: "chevron-right"


                    TwoLineRightIconListItem:
                        text: "[size=18]Version info[/size]"
                        secondary_text: "[size=18]1.0[/size]"

                        IconRightWidget:
                            icon: "chevron-right"

                    TwoLineRightIconListItem:
                        text: "[size=18]Transportation method[/size]"
                        secondary_text: "[size=18]Drive[/size]"

                        IconRightWidget:
                            icon: "chevron-right"

                    TwoLineRightIconListItem:
                        text: "[size=18]Display theme[/size]"
                        secondary_text: "[size=18]Light[/size]" if app.theme_cls.theme_style == "Light" else "[size=18]Dark[/size]"
                        on_release:
                            main_screens.current = "display_theme"
                            toolbar.right_action_items = []
                            toolbar.title = "                       DISPLAY THEME"

                        IconRightWidget:
                            icon: "chevron-right"
                            on_release:
                                main_screens.current = "display_theme"
                                toolbar.right_action_items = []
                                toolbar.title = f"{self.text}".upper()

                    OneLineRightIconListItem:
                        text: "[size=18]View legal information[/size]"

                        IconRightWidget:
                            icon: "chevron-right"

                    OneLineRightIconListItem:
                        text: "[size=18]Offline Maps[/size]"

                        IconRightWidget:
                            icon: "chevron-right"


                MDBoxLayout:

                    orientation: "vertical"
                    padding: 20
                    spacing: 20

                    MDRectangleFlatButton:

                        id: check_updates

                        markup: True
                        text: "Check for updates"
                        size_hint: (1, None)
                        line_color: app.disabled_text_orange
                        text_color: app.disabled_text_orange
                        line_width: 1.2
                        on_release:
                            app.checking_updates()

                    MDTextButton:
                        id: sign_out
                        text: "Sign out"
                        size_hint: 1, None
                        pos_hint: {"center_x": 0.5}
                        theme_text_color: "Custom"
                        color: app.disabled_text_orange
                        font_size: "13sp"
                        on_release:
                            root.manager.current = "login"

            MDScreen:
                name: "display_theme"

                GridLayout:
                    cols: 2
                    size_hint: 1, 0.12
                    pos_hint: {"center_x": 0.385, "top": 0.94}
                    spacing: 165

                    MDLabel:

                        text: "Dark mode"
                        halign: "center"


                    MDSwitch:

                        on_active: app.on_switch_active(*args)







            MDScreen:
                name: "vehicles"
                MDLabel:
                    text: "vehicles"
                    halign: "center"




        MDNavigationDrawer:

            id: nav_draw
            radius: 0, dp(8), dp(8), 0
            enable_swiping: True
            scrim_color: app.color_scrim
            padding: 0
            closing_time: 0.15
            opening_time: 0.15
            size_hint: 0.85, 1

            MDBoxLayout:
                id: box
                orientation: "vertical"

                padding: [0, 20, 0, 0]


                spacing: 7

                MDAnchorLayout:
                    anchor_x: "left"
                    size_hint_y: None
                    height: pic.height
                    Image:

                        id: pic
                        mode: "fill"
                        source: "assets/pfp.jpg"
                        radius: 90


                MDNavigationDrawerLabel:
                    pos_hint: {"center_x": 0.75}
                    text: "Carlos Cabrera"

                    text_color: "black"

                MDNavigationDrawerDivider:
                    padding: [0, 20, 0, -17]



                ScrollView:

                    MDList:


                        OneLineListItem:
                            id: update
                            text: "[size=18]Updates[/size]"


                            on_release:
                                nav_draw.set_state('close')
                                main_screens.current = "updates"

                                toolbar.right_action_items = [['message-outline'], ['information-outline']]
                                toolbar.title = ""


                        OneLineListItem:
                            text: "[size=18]Today's itinerary[/size]"

                            on_release:
                                main_screens.current = "itinerary"
                                nav_draw.set_state('close')
                                toolbar.right_action_items = [['message-outline'], ['information-outline']]
                                toolbar.title = "                         ITINERARY"

                        OneLineListItem:
                            text: "[size=18]Schedule[/size]"

                            on_release:

                                nav_draw.set_state('close')
                                main_screens.current = "schedule"
                                toolbar.right_action_items = [['message-outline'], ['information-outline']]
                                toolbar.title = ""

                        OneLineListItem:
                            text: "[size=18]Dashboard[/size]"
                            on_release:
                                toolbar.right_action_items = []
                                toolbar.title = f"                        DASHBOARD"
                                nav_draw.set_state('close')
                                main_screens.current = "dashboard"


                        OneLineListItem:
                            text: "[size=18]Learning Portal[/size]"
                            on_release:
                                toolbar.title = f"                  LEARNING PORTAL"
                                nav_draw.set_state('close')
                                toolbar.right_action_items = []
                                main_screens.current = "learning"

                        OneLineListItem:
                            text: "[size=18]Feedback[/size]"
                            on_release:
                                toolbar.title = f"                          FEEDBACK"
                                nav_draw.set_state('close')
                                toolbar.right_action_items = []
                                main_screens.current = "feedback"

                        OneLineListItem:
                            text: "[size=18]Settings[/size]"
                            on_release:
                                toolbar.title = f"                            SETTINGS"
                                nav_draw.set_state('close')
                                toolbar.right_action_items = []
                                main_screens.current = "settings"

                        OneLineListItem:
                            text: "[size=18]Connected Vehicle[/size]"

                            on_release:
                                toolbar.title = f"                CONNECTED VEHICLE"
                                nav_draw.set_state('close')
                                toolbar.right_action_items = []
                                main_screens.current = "vehicles"


<InStopInterface>

    MDLabel:
        text: "stop"
        halign: "center"
























